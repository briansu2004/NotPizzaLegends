@inherits Scene

<DemoMap @ref="Map" />
<Hero @ref="_hero" X="0.5" Y="4.0" />

@code {

    ISprite? _hero;

    [CascadingParameter] GameCanvas? Canvas { get; set; }

    protected override void OnAfterRender(bool firstRender)
    {
        if (firstRender)
            Sprites.Add(_hero);
    }

    protected override async Task OnParametersSetAsync()
    {
        if (Canvas != null)
            await Start();

    }

    async Task Start()
    {
        if (Canvas is null) throw new InvalidOperationException();

        IsRunning = true;

        while(IsRunning)
        {
            _hero?.Move(0.05, 0);
            await Canvas.RenderScene(this);
            await Task.Delay(15);
        }
    }
    
    void End() => IsRunning = false;
}
